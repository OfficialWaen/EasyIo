function EasyIo(a,b){var c=this;this.socket,this.eventListeners=[],this.init=function(a,b){c.socket=new WebSocket("ws://"+a+":"+b)},this.init(a,b),this.ready=function(a){c.ready=a},this.error=function(a){c.error=a},this.close=function(a){c.close=a},this.on=function(a,b){c.eventListeners[a+"EasyIo"]||(c.eventListeners[a+"EasyIo"]=[]),c.eventListeners[a+"EasyIo"].push(b)},this.off=function(a){delete c.eventListeners[a+"EasyIo"]},this.send=function(a,b){c.socket.send(JSON.stringify({event:a,data:b}))},this.socket.onmessage=function(a){var b=JSON.parse(a.data),d=b.forPublisher?"publisher":"listener";if(c.eventListeners[b.event])for(var e in c.eventListeners[b.event])c.eventListeners[b.event][e][d]&&c.eventListeners[b.event][e][d](b)},this.socket.onopen=function(a){c.ready()},this.socket.onclose=function(a){c.close()},this.socket.onerror=function(a){c.error()}}